@using MyWebtoonWebProject.Web.ViewModels.Webtoons
@using System.Security.Claims
@model WebtoonInfoViewModel
@{
    ViewBag.Title = Model.Title;
}

<div name="Header" class="col-md-12" style="position:relative;">
    <span>
        <img src="~/Webtoons/@Model.CoverPhoto" height="240px">
    </span>
    <div style="position:absolute;top:0;left:0;transform:translate(100%,40%);">
        <h2 style="color:forestgreen">@Model.GenreName</h2>
        <h1 style="text-align:center">@Model.Title</h1>
        <h3>@Model.AuthorName</h3>
    </div>
</div>

<div name="Body" class="col-md-8">
    <div name="Details" class="col-md-5">
        <span name="Note"></span>
        <span>Episodes</span>
        <ul class="list-unstyled">
            @foreach (var episode in Model.Episodes)
            {
                <li id="episodeCard" style="display:inline">
                    <a asp-controller="Episodes" asp-action="GetEpisode" asp-route-WebtoonNumber="@Model.TitleNumber" asp-route-EpisodeNumber="@episode.EpisodeNumber">
                    <p>@episode.EpisodeNumber</p>
                    <p>@episode.CreatedOn</p>
                    <p>@episode.Likes</p>
                    </a>
                </li>
            }
        </ul>
    </div>
    <div name="Side" class="col-md-3 offset-md-11">
        <ul>
            <li name="Subscribe">Subscribe</li>
            <li name="Rate">
                <button class="btn btn-success" name="Rate">Rate</button>
            </li>
        </ul>
        <p style="font-size: 16px; line-height: 25px; color:#000; width:357px; height:47px" name="Upload Day"> @Model.UploadDay</p>
        <p style="font-size:16px; line-height:25px; color:#313131; margin:3px 57px 0 0; word-wrap:break-word; width:300px; height:125px" name="Synopsis">
            @Model.Synopsis
        </p>
        @if(Model.AuthorId == this.User.FindFirstValue(ClaimTypes.NameIdentifier))
        {
        <a class="btn btn-secondary"  asp-controller="Episodes" asp-action="AddEpisode" asp-route-TitleNumber="@Model.TitleNumber">Add Episode</a>
        }

    </div>
    <div name="Reviews" class="col-md-5">
        <span>Reviews</span>
        <ul>
            @foreach (var review in Model.Reviews)
            {
                <li>

                </li>
            }
        </ul>
        <a class="btn btn-secondary" asp-controller="Reviews" asp-action="AddReview" asp-route-TitleNumber="@Model.TitleNumber">Leave a review.</a>
    </div>
</div>